{"code":"!function(e){var t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var l in e)n.d(o,l,function(t){return e[t]}.bind(null,l));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([,function(e,t,n){\"use strict\";function o(e,t,n,o,c){const i=document.createElement(\"div\");i.className=\"backdrop\",i.id=\"backdrop\";const r=document.getElementById(\"main\");r.appendChild(i);const a=document.createElement(\"div\");a.id=\"myModal\",a.className=\"myModal\";const d=document.createElement(\"p\");d.innerText=t,d.className=\"font-weight-bold text-center\",a.appendChild(d),r.appendChild(a);const s=document.createElement(\"div\");s.style=\"display:grid; grid-template-columns:auto auto;\",a.appendChild(s);const m=document.createElement(\"div\");m.innerText=\"❌\",m.style.textAlign=\"center\",m.className=\"modal_btn\",m.addEventListener(\"click\",(function(){l(),c&&c(e)})),s.appendChild(m);const u=document.createElement(\"div\");u.innerText=\"✔\",u.style.textAlign=\"center\",u.className=\"modal_btn\",u.addEventListener(\"click\",(function(){l(),o(e,n)})),s.appendChild(u)}function l(){const e=document.getElementById(\"backdrop\");if(e){const t=document.getElementById(\"myModal\");e.remove(),t.remove()}}function c(e,t){!function(e,t){const n=document.getElementById(\"main\"),o=document.createElement(\"div\");o.style=\"text-align: center;\",n.appendChild(o);let c=e;const i=document.createElement(\"h2\");i.style.color=\"red\",i.innerText=c+\"s left to vote\",o.appendChild(i);const a=document.createElement(\"button\");a.innerText=\"Skip Vote\",a.id=\"skip_btn\",a.className=\"btn btn-secondary\",o.appendChild(a);const d=setInterval(()=>{c<=1&&(clearInterval(d),o.remove(),r(),l(),t.emit(\"Voted\",{uid:\"No one\"})),c-=1,i.innerText=c+\"s left to vote\"},1e3);t.once(\"End Timer\",()=>{o.remove(),l(),clearInterval(d)}),a.addEventListener(\"click\",e=>{e.preventDefault(),a.remove(),r(),l(),t.emit(\"Voted\",{uid:\"No one\"})})}(e,t);const n=document.getElementById(\"players\");if(n.hasChildNodes()){const e=n.childNodes;for(let n=0;n<e.length;n++){const l=e[n];\"alive\"===l.firstChild.id&&(l.addEventListener(\"mouseover\",e=>{e.preventDefault(),l.style.cursor=\"pointer\"}),l.addEventListener(\"click\",e=>{e.preventDefault();const n=\"Are you sure you want to vote for \"+l.childNodes[1].innerText+\" ?\";o(t,n,l.id,i)}))}}}function i(e,t){e.emit(\"Voted\",{uid:t});document.getElementById(\"skip_btn\").remove(),r()}function r(){const e=document.getElementById(\"players\");if(e.hasChildNodes()){const t=e.childNodes;for(let e=0;e<t.length;e++){const n=t[e];if(\"alive\"===n.firstChild.id){const e=n.cloneNode(!0);e.style.cursor=\"default\",n.replaceWith(e)}}}}function a(e,t,n){switch(e){case 0:!function(e,t){const n=document.createElement(\"div\");n.id=t,n.style=\"text-align: center;\";const o=document.createElement(\"img\");o.id=\"alive\",o.src=\"/assests/unknown.png\",o.width=\"200\",o.height=\"300\",n.appendChild(o);const l=document.createElement(\"p\");l.innerText=e,l.style.color=\"white\",n.appendChild(l),document.getElementById(\"players\").appendChild(n)}(n.name,n.uid);break;case 1:!function(e,t){const n=document.getElementById(t).firstChild;switch(e){case-1:n.style.filter=\"grayscale(100%)\",n.id=\"dead\";break;case 0:n.src=\"/assests/innocent.png\";break;case 1:n.src=\"/assests/mafia.png\";break;case 2:n.src=\"/assests/police.png\";break;case 3:n.src=\"/assests/nurse.png\"}}(n.role,n.uid);break;case 2:!function(e){const t=document.getElementById(e),n=t.children[1].innerText;t.remove();const o=document.createElement(\"div\");o.innerText=n+\" disconnected\",o.className=\"alert alert-danger\",o.style=\"text-align: center\",o.id=\"error\";document.getElementById(\"main\").appendChild(o),setTimeout(()=>{o.remove()},5e3)}(n.uid);break;case 3:c(n.timer,t);break;case 4:!function(e,t,n){o(e,t,\"No one\",d,s);const c=document.getElementById(\"main\");let i=n;const r=document.createElement(\"h2\");r.id=\"timer\",r.style=\"color: red; text-align: center;\",r.innerText=i+\"s left to vote\",c.appendChild(r);const a=setInterval(()=>{i<=1&&(clearInterval(a),r.remove(),l(),e.emit(\"Save\",{save:!1})),i-=1,r.innerText=i+\"s left to vote\"},1e3);e.once(\"End Save Timer\",()=>{div.remove(),l(),clearInterval(a)})}(t,n.msg,n.timer);break;case 5:!function(e){const t=document.getElementById(\"main\"),n=document.createElement(\"div\");n.style=\"text-align: center;\",t.appendChild(n);let o=e;const l=document.createElement(\"h2\");l.id=\"timer\",l.style.color=\"red\",l.innerText=o+\"s left to chat\",n.appendChild(l);const c=setInterval(()=>{o<=1&&clearInterval(c),o-=1,l.innerText=o+\"s left to chat\"},1e3),i=document.createElement(\"button\");i.innerText=\"Return to main page\",i.id=\"ret_btn\",i.className=\"btn btn-secondary\",n.appendChild(i),i.addEventListener(\"click\",e=>{e.preventDefault(),location.reload()})}(n.timer)}}function d(e){e.emit(\"Save\",{save:!0});const t=document.getElementById(\"timer\");t&&t.remove()}function s(e){e.emit(\"Save\",{save:!1});const t=document.getElementById(\"timer\");t&&t.remove()}function m(e){const t=document.createElement(\"div\");t.style=\"display: grid; grid-template-columns:repeat(2,1fr);\";const n=document.createElement(\"p\");n.id=\"Role\",n.style=\"color: white; text-align: center;\",n.className=\"font-weight-bold\",n.innerText=\"Role:\";const o=document.createElement(\"p\");o.id=\"winCon\",o.style=\"color: white; text-align: center;\",o.className=\"font-weight-bold\",o.innerText=\"Winning Condition:\";const l=document.createElement(\"p\"),c=document.createElement(\"p\"),i=document.getElementById(\"contents\");t.appendChild(n),t.appendChild(l),t.appendChild(o),t.appendChild(c),i.insertBefore(t,i.childNodes[0]),e.once(\"Role Description\",({playerRole:e})=>{switch(e){case 0:l.innerText=\"Innocent\",l.style.color=\"GreenYellow\",c.innerText=\"Vote all mafia out\",c.style.color=\"GreenYellow\";break;case 1:l.innerText=\"Mafia\",l.style.color=\"pink\",c.innerText=\"Kill nurse & police or innocents\",c.style.color=\"pink\";break;case 2:l.innerText=\"Police\",l.style.color=\"GreenYellow\",c.innerText=\"Vote all mafia out\",c.style.color=\"GreenYellow\";break;case 3:l.innerText=\"Nurse\",l.style.color=\"GreenYellow\",c.innerText=\"Vote all mafia out\",c.style.color=\"GreenYellow\"}})}function u(){const e=document.createElement(\"textarea\");e.className=\"note\",e.style=\"resize: none; overflow-y: scroll; height:200px;\",e.placeholder=\"Write down your notes here\";const t=document.getElementById(\"contents\");t.insertBefore(e,t.childNodes[1])}function p(e){!function(e){const t=document.createElement(\"div\");t.className=\"chat-container\";const n=document.createElement(\"div\");n.className=\"chat-header\",n.innerText=\"Chat Room\",t.appendChild(n);const o=document.createElement(\"div\");o.className=\"chat-messages\",o.id=\"chat-messages\",t.appendChild(o);const l=document.createElement(\"div\");l.className=\"chat-form-container\";const c=document.createElement(\"form\");c.id=\"chat-form\";const i=document.createElement(\"input\");i.id=\"msg\",i.type=\"text\",i.placeholder=\"Enter Message\",i.autocomplete=\"off\",i.required=\"on\",e.on(\"Message On\",()=>{i.disabled=!1}),e.on(\"Message Off\",()=>{i.disabled=!0}),c.addEventListener(\"submit\",t=>{t.preventDefault(),e.emit(\"Client Message\",{msg:t.target.msg.value}),document.getElementById(\"msg\").value=\"\"}),c.appendChild(i),l.appendChild(c),t.appendChild(l);document.getElementById(\"contents\").appendChild(t)}(e),e.on(\"New Message\",({name:e,msg:t})=>{g(t=e+\": \"+t,\"white\")}),e.on(\"System Message\",({msg:e})=>{g(e,\"YellowGreen\")})}function g(e,t){const n=document.createElement(\"div\");n.className=\"message\",n.innerText=e,n.style.color=t;const o=document.getElementById(\"chat-messages\");o.appendChild(n),o.scrollTop+o.clientHeight>=o.scrollHeight-30&&n.scrollIntoView()}function y(e,t,n){const o=document.createElement(\"div\");if(o.id=\"contents\",o.style=\"display: grid; justify-content: center; flex-grow: 2\",lobby.appendChild(o),function(e,t){let n=t;const o=document.createElement(\"p\");o.id=\"timeout\",o.style=\"color: red;\",o.innerText=n+\" seconds left until you all get kick HURRY!!!!\",e.appendChild(o);const l=setInterval(()=>{if(n<=1){clearInterval(l);null!=document.getElementById(\"timeout\")&&location.reload()}n-=1,o.innerText=n+\" seconds left until you all get kick HURRY!!!!\"},1e3)}(o,n),p(e),t)e.once(\"Start Game Status\",({status:t,msg:n})=>{document.getElementById(\"timeout\").remove(),m(e),u()});else{const t=document.createElement(\"button\");t.id=\"start-game\",t.className=\"btn btn-primary\",t.innerText=\"Start Game\",o.appendChild(t),t.addEventListener(\"click\",t=>{t.preventDefault(),e.emit(\"Start Game\")}),e.on(\"Start Game Status\",({status:t,msg:n})=>{!function(e,t,n){if(t){document.getElementById(\"timeout\").remove();document.getElementById(\"start-game\").remove(),m(e),u()}else{const e=document.getElementById(\"start-game\");e.disabled=\"disabled\";const t=document.createElement(\"div\");t.innerText=n,t.className=\"alert alert-danger\",t.style=\"text-align: center\",t.id=\"error\";document.getElementById(\"main\").appendChild(t),setTimeout(()=>{t.remove(),e.disabled=\"\"},5e3)}}(e,t,n)})}}function f(e,t,n,o){document.getElementById(\"signup\").remove();const l=document.getElementById(\"roomid\");l.innerText=\"Room id: \"+t,l.style.display=\"\";const c=document.getElementById(\"main\"),i=document.createElement(\"div\");i.id=\"lobby\",i.style=\"display: flex; flex-direction: row; align-items: center; margin: 30px;\",c.appendChild(i),e.on(\"Forced Disconnect\",({msg:e})=>{!function(e){let t=5;document.getElementById(\"lobby\").remove();const n=document.getElementById(\"main\"),o=document.createElement(\"h2\");o.style=\"color: red; text-align: center; margin: 60px\",o.innerText=e+\", redirecting back to signup page in \"+t,n.appendChild(o);const l=setInterval(()=>{t<=1&&(clearInterval(l),location.reload()),t-=1,o.innerText=e+\", redirecting back to signup page in \"+t},1e3)}(e)}),function(e){const t=document.getElementById(\"lobby\"),n=document.createElement(\"div\");n.id=\"players\",n.style=\"display: grid; grid-template-columns:repeat(4,5fr); align-items: center; flex-grow: 8;\",t.appendChild(n),function(e,t){e.on(\"A New Player Joined\",n=>{t(0,e,n)}),e.on(\"Show Role\",n=>{t(1,e,n)}),e.on(\"A Client Disconnected\",n=>{t(2,e,n)}),e.on(\"Please Vote\",n=>{t(3,e,n)}),e.on(\"Revive Potion\",n=>{t(4,e,n)}),e.once(\"Game Over\",n=>{t(5,e,n)})}(e,a)}(e),y(e,n,o)}n.r(t);const v=document.getElementById(\"roomid-input\"),h=document.getElementById(\"signup-btn\");v.addEventListener(\"input\",(function(){h.innerText=0===v.value.length?\"Create Game\":\"Join Game\"}));const E=io();document.getElementById(\"signup-form\").addEventListener(\"submit\",e=>{e.preventDefault();const t=e.target[\"name-input\"].value,n=e.target[\"roomid-input\"].value;if(\"\"===t){const e=document.getElementById(\"error-msg\");return e.style=\"color: red; font-size: 20px;\",void(e.innerText=\"Please at least tell me your name 🐵\")}\"\"===n?E.emit(\"Create Game\",{name:t}):E.emit(\"Join Game\",{name:t,roomid:n})}),E.once(\"Create Game Status\",({status:e,roomid:t,clock:n})=>{e&&f(E,t,0,n)}),E.on(\"Join Game Status\",({status:e,msg:t,roomid:n,whoami:o,clock:l})=>{if(e)f(E,n,o,l);else{const e=document.getElementById(\"error-msg\");e.style=\"color: red; font-size: 20px;\",e.innerText=t+\" 🙈\"}})}]);","extractedComments":[]}